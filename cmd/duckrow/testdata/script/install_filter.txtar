# Test installing with skill filter

# Create a project directory
mkdir myproject

# Create multi-skill source directory
mkdir multi-skills/skills/skill-a
mkdir multi-skills/skills/skill-b
mkdir multi-skills/skills/skill-c
cp skill-a-md multi-skills/skills/skill-a/SKILL.md
cp skill-b-md multi-skills/skills/skill-b/SKILL.md
cp skill-c-md multi-skills/skills/skill-c/SKILL.md
setup-git-repo multi-skills test-skills skill-a skill-b skill-c

# Set up config override
setup-config-override test-owner/multi-skills multi-skills

# Install only "skill-b" from a multi-skill source
exec duckrow install test-owner/multi-skills -d myproject --skill skill-b
stdout 'Installed: skill-b'
! stdout 'skill-a'
! stdout 'skill-c'

# Verify only skill-b was installed
exists myproject/.agents/skills/skill-b/SKILL.md
dir-not-exists myproject/.agents/skills/skill-a
dir-not-exists myproject/.agents/skills/skill-c

# Install with a nonexistent filter
! exec duckrow install test-owner/multi-skills -d myproject --skill nonexistent
stderr 'not found'
stderr 'Available'

-- skill-a-md --
---
name: skill-a
description: Skill A
---
# Skill A
-- skill-b-md --
---
name: skill-b
description: Skill B
---
# Skill B
-- skill-c-md --
---
name: skill-c
description: Skill C
---
# Skill C
