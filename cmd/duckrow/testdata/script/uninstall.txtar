# Test uninstalling a skill

# Create skill source as a git repo
mkdir skill-source
cp skill-md skill-source/SKILL.md
setup-git-repo skill-source test-skills my-skill

# Set up config override
setup-config-override test-owner/test-repo skill-source

# Setup: create project and install a skill
mkdir myproject
exec duckrow install test-owner/test-repo -d myproject
stdout 'Installed: my-skill'
exists myproject/.agents/skills/my-skill/SKILL.md

# Uninstall the skill
exec duckrow uninstall my-skill -d myproject
stdout 'Removed: my-skill'
! stderr .

# Verify it's gone
dir-not-exists myproject/.agents/skills/my-skill

# Status should show no skills
exec duckrow status myproject
stdout 'Skills: none installed'

# Uninstalling a nonexistent skill should fail
! exec duckrow uninstall nonexistent -d myproject
stderr 'not found'

-- skill-md --
---
name: my-skill
description: A skill to uninstall
---
# My Skill
